"use strict";const contentHn=document.getElementById("contentHn"),postBtn=document.getElementById("posts");let rowData="";function loadData(channel){switch(channel){case"hackernews":axios.get("/hackernews",{responseType:"json"}).then(response=>{postBtn.hidden=!0,toHnTable(response.data.items)}).catch(err=>{console.log(err)});break;case"hackernewsTop":postBtn.hidden=!0,axios.get("https://hacker-news.firebaseio.com/v0/topstories.json",{responseType:"json"}).then(response=>{postBtn.hidden=!0,toHnlTable(response.data)}).catch(err=>{console.log(err)}),postBtn.hidden=!1;break;case"hackerearth":axios.get("/hackerearth",{responseType:"document"}).then(response=>{console.log(response.data)}).catch(err=>{console.log(err)});break;default:console.log("default:  "+channel)}}function toHnTable(data){contentHn.innerHTML="",console.log(data);for(let i=0;i<data.length;i++)contentHn.innerHTML+='<tr><td colspan="2"><p>'+data[i].content_html.replace(" URL","").replace(/">.*\s<.*\s.*\s.*/g,`" target="_blank" > ${data[i].title}`)+"</a></div><div>Author: "+data[i].author+"&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbspPublished on: "+new Date(data[i].date_published).toLocaleString("en-GB",{timeZoneName:"short",hc:"h24",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})+"</div></p></tdcolspan></tr>";postBtn.hidden=!1}function toHnlTable(data){let getData;contentHn.innerHTML="",console.log(data.length+"\n"+data),(async()=>{let postData=data.map(id=>`https://hacker-news.firebaseio.com/v0/item/${id}.json`).map(url=>axios.get(url,{responseType:"json"}));try{return Promise.resolve((await Promise.all(postData)).map(res=>res.data))}catch(err){return console.error(err),Promise.reject(new Error(rowData))}})().then(res=>{rowData=res.map(row=>`<tr>\n        <td colspan="2">\n        <p><a href ="${row.url}"trget="_blank" rel="noopener"> ${row.title}</a>\n        </div>\n        <div>Author:  ${row.by} &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp\n        Published on: ${new Date(1e3*row.time).toLocaleString("en-GB",{timeZoneName:"short",hc:"h24",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})} \n        </div></p>\n        </td>\n        </tr>`)}).catch(err=>console.log(".catch => ERR:\t"+err)).finally(()=>{console.log(rowData.length),postBtn.hidden=!0;for(let element of rowData)contentHn.innerHTML+=element;postBtn.hidden=!1})}window.onload=(()=>{window.location.hash?loadData(window.location.hash.split("#")[1]):(loadData("hackernews"),document.location.hash="#hackernews")}),window.onhashchange=(param=>loadData(param.newURL.split("#")[1])),document.getElementById("btnReload").onclick=(()=>loadData(window.location.hash.replace("#","")));let countClick=1;postBtn.onclick=(event=>{++countClick%2==0?(window.location.hash="hackernewsTop",event.srcElement.innerHTML="Show LATEST"):(window.location.hash="hackernews",event.srcElement.innerHTML="Show TOP")});
//# sourceMappingURL=index.min.js.map